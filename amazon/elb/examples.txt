name    : DescribeLoadBalancers
title   : Show all elastic load balancers
intro   : This example shows how to list all elastic load balancers.
example : <<EOF
elb.DescribeLoadBalancers(function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});

elb.DescribeLoadBalancers({}, function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
result : <<EOF
  { StatusCode: 200,
    Headers: 
    { 'x-amzn-requestid': 'd92c5965-3470-11e2-8460-777e58d78a47',
      'content-type': 'text/xml',
      'content-length': '1951',
      date: 'Thu, 22 Nov 2012 06:50:05 GMT' },
    Body: 
    { DescribeLoadBalancersResponse: 
      { '@': { xmlns: 'http://elasticloadbalancing.amazonaws.com/doc/2011-08-15/' },
        DescribeLoadBalancersResult: 
        { LoadBalancerDescriptions: 
          { member: 
            { CanonicalHostedZoneNameID: 'Z3NF1Z3NOM5OY2',
              CanonicalHostedZoneName: 'test-1044477091.eu-west-1.elb.amazonaws.com',
              LoadBalancerName: 'test',
              CreatedTime: '2012-11-22T06:49:57.090Z',
              SourceSecurityGroup: 
                { OwnerAlias: 'amazon-elb',
                  GroupName: 'amazon-elb-sg' },
                  DNSName: 'test-1044477091.eu-west-1.elb.amazonaws.com',
                  HealthCheck: 
                  { Interval: '30',
                    Target: 'HTTP:80/index.html',
                    HealthyThreshold: '10',
                    Timeout: '5',
                    UnhealthyThreshold: '2' },
                  ListenerDescriptions: 
                  { member: 
                    { PolicyNames: {},
                      Listener: 
                      { Protocol: 'HTTP',
                        LoadBalancerPort: '80',
                        InstanceProtocol: 'HTTP',
                        InstancePort: '80' } } },
                  Instances: { member: { InstanceId: 'i-5026b11b' } },
                  BackendServerDescriptions: {},
                  Policies: 
                  { AppCookieStickinessPolicies: {},
                    OtherPolicies: {},
                    LBCookieStickinessPolicies: {} },
                  AvailabilityZones: { member: 'eu-west-1a' } } } },
        ResponseMetadata: { RequestId: 'd92c5965-3470-11e2-8460-777e58d78a47' } } } }
});
EOF
---
name    : DeleteLoadBalancer
title   : Delete a loadbalancer
intro   : This example shows how to delete a loadbalancer.
example : <<EOF
var params = {
    LoadBalancerName : 'test'
}
elb.DeleteLoadBalancer(params, function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : DeleteLoadBalancerPolicy
title   : Delete a loadbalancer policy
intro   : This example shows how to delete a loadbalancer policy.
example : <<EOF
var params = {
    PolicyName        : 'policyName',
    LoadBalancerName  : 'test'
}
elb.DeleteLoadBalancerPolicy(params, function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : DeleteLoadBalancerListeners
title   : Delete (a) loadbalancer listener(s)
intro   : This example shows how to delete (a) loadbalancer listener(s).
example : <<EOF
var params = {
    LoadBalancerPorts : [80,8080],
    LoadBalancerName  : 'test'
}
elb.DeleteLoadBalancerListeners(params, function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : CreateLoadBalancer
title   : Create a loadbalancer
intro   : This example shows how to create a loadbalancer.
example : <<EOF
var params = {
    LoadBalancerName : 'test',
    Listeners : [{
      LoadBalancerPort : 80,
      Protocol : 'http',
      InstancePort : 3000
    }],
    AvailabilityZones: [amazon.EU_WEST_1+'a']
}
elb.CreateLoadBalancer(params, function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : DescribeLoadBalancerPolicies
title   : List all loadbalancer policies available
intro   : This example shows how to list all loadbalancer policies available. This is useful to determine which SSL negotations are available. If you don't have any loadbalancers this will provide you with all options available.
example : <<EOF
elb.DescribeLoadBalancerPolicies({},function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
elb.DescribeLoadBalancerPolicies(function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : DescribeLoadBalancerPolicies
title   : List all policies of a specific loadbalancer
intro   : This example shows how to list all policies of a specific loadbalancer.
example : <<EOF
var params = {
  LoadBalancerName : 'test'
}
elb.DescribeLoadBalancerPolicies(params,function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : DescribeLoadBalancerPolicyTypes
title   : List all policy types available
intro   : This example shows how to list all policy types available. Think about cookie and SSL settings to support in a loadbalancer.
example : <<EOF
elb.DescribeLoadBalancerPolicies({},function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
elb.DescribeLoadBalancerPolicies(function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : RegisterInstancesWithLoadBalancer
title   : Register a or multiple instances with a loadbalancer
intro   : This example shows how to register an instance with a loadbalancer. Keep in mind that an instance can stick in "out of order" mode when it is initiated in a availability zone that the loadbalancer is not using. It will shows this inside the webconsole but will say "Could not find EC2 instance". It will also take some time before the status of the instance inside the loadbalancer is fully initiated. This is important to know if you want to quickly want to add instances.
example : <<EOF
var params = {
    Instances           : [{InstanceId:'i-1234fake'}],
    LoadBalancerName    : 'test'
};
elb.RegisterInstancesWithLoadBalancer(params,function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : DeregisterInstancesFromLoadBalancer
title   : Deregister a or multiple instances with a loadbalancer
intro   : This example shows how to deregister an instance with a loadbalancer. Keep in mind that you can only deregister instances that are running and fully connected to a loadbalancer, so "out of order" means it is not yet connected and cannot be deregistered!
example : <<EOF
var params = {
    Instances           : [{InstanceId:'i-1234fake'}],
    LoadBalancerName    : 'test'
};
elb.DeregisterInstancesFromLoadBalancer(params,function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : DescribeInstanceHealth
title   : List instance health of an instance in a loadbalancer
intro   : This example shows how to list instance health of an instance in a loadbalancer. 
example : <<EOF
var params = {
    Instances           : [{InstanceId:'i-1234fake'}],
    LoadBalancerName    : 'test'
};
elb.DescribeInstanceHealth(params,function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
result : <<EOF
{ StatusCode: 200,
  Headers: 
   { 'x-amzn-requestid': 'd055cafb-3de3-11e2-8460-777e58d78a47',
     'content-type': 'text/xml',
     'content-length': '534',
     date: 'Tue, 04 Dec 2012 07:25:43 GMT' },
  Body: 
   { DescribeInstanceHealthResponse: 
      { '@': { xmlns: 'http://elasticloadbalancing.amazonaws.com/doc/2011-11-15/' },
        DescribeInstanceHealthResult: 
         { InstanceStates: 
            { member: 
               { Description: 'N/A',
                 InstanceId: 'i-1234fake',
                 State: 'InService',
                 ReasonCode: 'N/A' } } },
        ResponseMetadata: { RequestId: 'd055cafb-3de3-11e2-8460-777e58d78a47' } } } }
EOF
---
name    : DisableAvailabilityZonesForLoadBalancer
title   : Disable (an) availability zone(s) for a loadbalancer
intro   : This example shows how to disable (an) availability zone(s) for a loadbalancer.
example : <<EOF
var params = {
    AvailabilityZones   : ['eu-west-1a','eu-west-1b']
    LoadBalancerName    : 'test'
};
elb.DisableAvailabilityZonesForLoadBalancer(params,function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : EnableAvailabilityZonesForLoadBalancer
title   : Enable (an) availability zone(s) for a loadbalancer
intro   : This example shows how to enable (an) availability zone(s) for a loadbalancer.
example : <<EOF
var params = {
    AvailabilityZones   : ['eu-west-1a','eu-west-1b']
    LoadBalancerName    : 'test'
};
elb.EnableAvailabilityZonesForLoadBalancer(params,function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : ApplySecurityGroupsToLoadBalancer
title   : (VPC only!) Link a security group to a loadbalancer
intro   : This example shows how to link a security group to a loadbalancer.
example : <<EOF
var params = {
    SecurityGroups      : ['quicklaunch-1','my-security-group-1']
    LoadBalancerName    : 'test'
};
elb.ApplySecurityGroupsToLoadBalancer(params,function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : AttachLoadBalancerToSubnets
title   : (VPC only!) Attach a loadbalancer to (a) specific subnet(s)
intro   : This example shows how to attach a loadbalancer to (a) specific subnet(s).
example : <<EOF
var params = {
    Subnets             : ['my-subnet']
    LoadBalancerName    : 'test'
};
elb.AttachLoadBalancerToSubnets(params,function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : ConfigureHealthCheck
title   : Enable a healthcheck on a loadbalancer
intro   : This example shows how to enable a healthcheck on a loadbalancer. Ensure that you have a timeout that is less than the interval. In this case it will target through http port 80 (and you can add a path with folders behind it (see documentation)).
example : <<EOF
var params = {
    Target              : 'http:80/',
    HealthyThreshold    : 10,
    Interval            : 60,
    Timeout             : 30,
    UnhealthyThreshold  : 3,
    LoadBalancerName    : 'test'
};
elb.ConfigureHealthCheck(params,function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : CreateAppCookieStickinessPolicy
title   : Create an app cookie stickiness policy
intro   : This example shows how to create an app stickiness policy. It ensures stickiness with cookies through http/https.
example : <<EOF
var params = {
    CookieName          : 'testCookie'
    PolicyName          : 'testPolicy',
    LoadBalancerName    : 'test'
};
elb.CreateAppCookieStickinessPolicy(params,function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : CreateLBCookieStickinessPolicy
title   : Define the expiration period of a cookie on a loadbalancer
intro   : This example shows how to define the expiration period of a cookie on a loadbalancer. It is only available with cookies through http/https.
example : <<EOF
var params = {
    CookieExpirationPeriod  : 10000,
    PolicyName              : 'testPolicyExpiration',
    LoadBalancerName        : 'test'
};
elb.CreateLBCookieStickinessPolicy(params,function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : CreateLoadBalancerListeners
title   : Create listener(s) onto a loadbalancer
intro   : This example shows how to create listener(s) onto a loadbalancer. You can add multiple listeners to a loadbalancer, but no duplicates will be created.
example : <<EOF
var params = {
    Listeners             : [
      {
        LoadBalancerPort  : 80,
        Protocol          : 'http',
        InstancePort      : 80,
        InstanceProtocol  : 'http'
      }
    ],
    LoadBalancerName      : 'test'
};
elb.CreateLoadBalancerListeners(params,function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : CreateLoadBalancerPolicy
title   : Create a policy onto a loadbalancer
intro   : This example shows how to create a policy on a loadbalancer. [Issue] Any remarks/corrections are welcome! 
example : <<EOF
var params = {
    PolicyName            : 'testLB',
    PolicyTypeName        : 'testPolicy',
    PolicyAttributes      : [
      {
        AttributeName     : 'attribute',
        AttributeValue    : 20
      }
    ],
    LoadBalancerName      : 'test'
};
elb.CreateLoadBalancerPolicy(params,function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : DetachLoadBalancersFromSubnets
title   : (VPC only!) Detach a loadbalancer from (a) specific subnet(s)
intro   : This example shows how to detach a loadbalancer from (a) specific subnet(s).
example : <<EOF
var params = {
    Subnets             : ['my-subnet']
    LoadBalancerName    : 'test'
};
elb.DetachLoadBalancersFromSubnets(params,function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : SetLoadBalancerListenerSslCertificate
title   : Attach a ssl certificate on a loadbalancer
intro   : This example shows how to attach a ssl certificate on a loadbalancer. See more information at http://docs.amazonwebservices.com/IAM/latest/UserGuide/ManagingServerCerts.html
example : <<EOF
var params = {
    SSLCertificateId    : 'sslCertificateIdentifier',
    LoadBalancerPort    : 80,
    LoadBalancerName    : 'test'
};
elb.SetLoadBalancerListenerSslCertificate(params,function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : SetLoadBalancerPoliciesForBackendServer
title   : Attach policies onto a loadbalancer
intro   : This example shows how to attach policies onto a loadbalancer. Replaces the current set of policies associated with a port on which the back-end server is listening with a new set of policies, like done after a CreateLoadBalancer action.
example : <<EOF
var params = {
    PolicyNames       : ['policyName1','policyName2'],
    InstancePort      : 80,
    LoadBalancerName  : 'test'
};
elb.SetLoadBalancerPoliciesForBackendServer(params,function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : SetLoadBalancerPoliciesOfListener
title   : Updates policy of a loadbalancer listener
intro   : This example shows how to update policy of a loadbalancer listener. You can associate multiple policies with a listener.
example : <<EOF
var params = {
    PolicyNames       : ['policyName1','policyName2'],
    LoadBalancerPort  : 80,
    LoadBalancerName  : 'test'
};
elb.SetLoadBalancerPoliciesOfListener(params,function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---