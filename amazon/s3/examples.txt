name    : PutObject
title   : Uploading a String as the Object
intro   : This example shows how to upload a string as the object.
example : <<EOF
var body = "Hello, World!\n";

var params = {
    BucketName    : 'pie-18',
    ObjectName    : 'test-object.txt',
    ContentLength : Buffer.byteLength(body),
    Body          : body,
};

s3.PutObject(params, function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : PutObject
title   : Uploading some MetaData with your Object
intro   : By using the <code>MetaData</code> param, you can set metadata on your object.
example : <<EOF
var body = "Hello, World!\n";

var params = {
    BucketName    : 'pie-18',
    ObjectName    : 'test-object-with-metadata.txt',
    MetaData      : {
        'Username' : 'chilts',
        'UniqueId' : '629f3b9b-49bb-4d0b-b38b-21ad9b132e90'
    },
    ContentLength : Buffer.byteLength(body),
    Body          : body,
};

s3.PutObject(params, function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : PutObject
title   : Setting a Cache-Control header on your object
intro   : Just use the <code>CacheControl</code> parameter.
example : <<EOF
var body = "Hello, World!\n";

var params = {
    BucketName    : 'pie-18',
    ObjectName    : 'test-cache.txt',
    ContentLength : Buffer.byteLength(body),
    Body          : body,
    CacheControl  : 'max-age=3600'
};

s3.PutObject(params, function(err, data) {
    fmt.msg("putting an object with cache-control to pie-18 - expecting success");
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : PutObject
title   : Putting a Buffer to S3 as the Object
intro   : This example is similar to putting a string, except 
example : <<EOF
var buf = fs.readFileSync(__filename);

var params = {
    BucketName    : 'pie-18',
    ObjectName    : 'buffer-file.txt',
    ContentLength : buf.length,
    Body          : buf,
};

s3.PutObject(params, function(err, data) {
    fmt.dump(err, 'Error');
    fmt.dump(data, 'Data');
});
EOF
---
name    : PutObject
title   : Streaming a File
intro   : To stream anything to S3, just create a stream and pass it to the <code>Body</code>. Unfortunately S3 requires the <code>ContentLength</code> so you'll have to somehow get this in advance. Here, we're using <code>fs.stat()</code> to do this for us.
example : <<EOF
// you must run fs.stat to get the file size for the content-length header (s3 requires this)
fs.stat(__filename, function(err, file_info) {
    if (err) {
        fmt.dump(err, 'Error reading file');
        return;
    }

    var bodyStream = fs.createReadStream( __filename );

    var params = {
        BucketName    : 'pie-18',
        ObjectName    : __filename,
        ContentLength : file_info.size,
        Body          : bodyStream
    };

    s3.PutObject(params, function(err, data) {
        fmt.dump(err, 'Error');
        fmt.dump(data, 'Data');
    });
});
EOF
---
